---
tags: [SSH, PuTTY, MobaXterm]
---

![SSH key pairs](https://www.hostinger.com/tutorials/wp-content/uploads/sites/2/2017/07/asymmetric-encryption.jpg)

[SSH](https://en.wikipedia.org/wiki/Secure_Shell) is the standard method to log into a remote Linux server. There is an SSH server program running in the remote machine monitoring any connection request from other machines. You can use an SSH client command or an SSH GUI to connect to that server:

``` sh
$ ssh yourUserName@linux.server.name.or.ip
```

This is a lot of typing. If you log into the server frequently, you can reduce typing by saving some information in an `ssh` configuration file.

### Configuration of SSH clients

#### Command line configuration

``` sh
$ cd # make sure that you are in your home directory
$ mkdir .ssh # make a hidden directory called .ssh
$ chmod 700 .ssh # make it only visible to yourself
$ cd .ssh
$ touch config # create an empty configuration file (only needed in MobaXterm)
$ open config # works in macOS and MobaXterm, use 'mimeopen config' in Linux
```

Ref. to [chmod in wikipedia](https://en.wikipedia.org/wiki/Chmod) for detailed usage of `chmod`.

An example `config`:

```sh
# specify a short nickname, l, for server: linux.server.name.or.ip
Host l
HostName linux.server.name.or.ip
User YourUserName
```

Now you can log into the Linux server by only typing

``` sh
$ ssh l
```

#### GUI configurations

- [PuTTY]({% post_url learning/2016-08-29-connect-to-Linux-from-any-Windows-PC %})
- [MobaXterm]({% post_url learning/2015-05-14-coding-on-linux-server-from-windows-pc %})

The default communication port for `ssh` is 22. It is set from the server side. If there is no specific instruction from your server administrator on the port number, it is mostly the default 22, there is no need for you to change it.

### Copy files through SSH

``` sh
$ scp aLocalFile user@server:path/to/remote/directory
$ scp user@server:path/to/a/remote/file localCopy
```

MobaXterm in Windows provides a nice side panel that shows files in the current folder in the terminal. One can drag files in and out of it for copying. Mac users may want to try <https://cyberduck.io/>, or <https://filezilla-project.org/>, or <https://osxfuse.github.io/>. Linux users can try [SSHFS](https://wiki.archlinux.org/index.php/SSHFS). If you are an [Emacs][] or [Vim][] user, both editors provide commands to directly edit remote files.

[Emacs]: https://stackoverflow.com/questions/20624024/what-is-the-best-way-to-open-remote-files-with-emacs-and-ssh
[Vim]: https://unix.stackexchange.com/questions/202918/how-do-i-remotely-edit-files-via-ssh

### Login without password

Normally, a GUI SSH client can save your password to the server so that you don't have to type it next time. This can also be achieved in the command line through a file called `~/.netrc`. You can save your connection information (including the password) in this file:

``` sh
$ touch ~/.netrc
$ chmod 600 ~/.netrc # hide it from others
$ open ~/.netrc # edit it, put the following into it:
machine remote.server.name.or.ip login username password sZ\#Je/j@3
```

Your password is saved as it is in `~/.netrc`. A better way is to use [SSH keys](https://wiki.archlinux.org/index.php/SSH_keys). The basic idea is that you generate a pair of keys, one is private, one is public. You upload the public one to the server and keep the private one secretly in your `~/.ssh`. Next time, when you log into the server, if the two keys match, you will be logged in without typing in your password.

### X-window through SSH

Windows users can use [MobaXterm](https://mobaxterm.mobatek.net/), [Xming](http://www.straightrunning.com/XmingNotes/), or [Cygwin/X](https://x.cygwin.com/) to establish an [X-window](https://en.wikipedia.org/wiki/X_Window_System) server in your local PC. Mac users can use [XQuartz](https://www.xquartz.org/).

``` sh
$ ssh -X user@server
$ gedit &
```

To save typing, you can add the following line to your existing `~/.ssh/config`:

```
ForwardX11 yes
```

#### Window manager

- [twm](https://en.wikipedia.org/wiki/Twm)
- [fluxbox](https://en.wikipedia.org/wiki/Fluxbox)
- [dwm](http://dwm.suckless.org/)
- [gnome-session](http://manpages.ubuntu.com/manpages/trusty/man1/gnome-session.1.html)

### VNC through SSH

There are two problems in using X-window. First, it is slow. Second, there is no free X-window server in iOS. We need [VNC][] to overcome these problems.

[VNC]: https://en.wikipedia.org/wiki/Virtual_Network_Computing

#### VNC server

```sh
$ vncpasswd
$ vncserver
$ vncserver -list
$ vncserver -kill
```

#### Local port forwarding

The following command will forward `server.ip.address:8000` to `localhost:80`:

~~~sh
ssh -L 80:127.0.0.1:8000 server.ip.address
~~~

This can also be specified in the ssh config file:

~~~
Host servername
HostName server.ip.address
User username
LocalForward 80 127.0.0.1:8000
~~~

The port forwarding function is also available under MobaXTerm's *tools* menu.

#### VNC viewer

- [MobaXterm](https://blog.mobatek.net/post/ssh-tunnels-and-port-forwarding/)
- [RealVNC](https://www.realvnc.com/en/connect/download/viewer/)
